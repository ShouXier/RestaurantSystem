# 餐馆订餐管理系统 (Restaurant Management System)

一个用纯C语言编写的餐馆订餐管理系统，支持菜单管理、外卖订单管理和堂食订单管理。

## 项目简介

本项目是一个完整的餐馆订餐管理系统，使用标准C语言（C99）实现。系统提供了菜单管理、外卖订单管理和堂食订单管理三大核心功能模块。

### 主要特性

- ✅ **菜单管理**：增加、删除、修改、查询菜品
- ✅ **外卖订单管理**：创建、修改、查询、删除外卖订单
- ✅ **堂食订单管理**：创建、修改、查询、删除堂食订单
- ✅ **账单计算**：自动计算小计、配送费（外卖订单10%）、总计
- ✅ **订单号生成**：自动生成唯一订单编号
- ✅ **标准C实现**：遵循C99标准，无C++特性
- ✅ **内存管理**：使用malloc/free进行动态内存管理

## 项目结构

```
RestaurantSystem/
├── include/              # 头文件目录
│   ├── dish.h           # 菜品模块
│   ├── menu.h           # 菜单模块
│   ├── order.h          # 订单基类
│   ├── bill.h           # 账单模块
│   ├── takeout.h        # 外卖订单
│   ├── dinein.h         # 堂食订单
│   ├── takeout_system.h # 外卖管理系统
│   ├── dinein_system.h  # 堂食管理系统
│   └── utils.h          # 工具函数
├── src/                 # 源文件目录
│   ├── dish.c
│   ├── menu.c
│   ├── order.c
│   ├── bill.c
│   ├── takeout.c
│   ├── dinein.c
│   ├── takeout_system.c
│   ├── dinein_system.c
│   ├── utils.c
│   └── main.c
├── bin/                 # 可执行文件目录（自动生成）
├── obj/                 # 目标文件目录（自动生成）
├── .vscode/             # VS Code配置
│   ├── launch.json
│   └── tasks.json
├── Makefile             # 编译配置
├── .gitignore
└── README.md
```

## 编译和运行

### 前置要求

- GCC编译器（支持C99标准）
- Make工具
- Linux/macOS/Windows (with MinGW或WSL)

### 编译

```bash
# 使用Makefile编译
make

# 清理编译文件
make clean

# 编译并运行
make run
```

### 手动编译

```bash
# 创建必要的目录
mkdir -p bin obj

# 使用gcc直接编译
gcc -Wall -Wextra -std=c99 -g -Iinclude src/*.c -o bin/restaurant_system
```

### 运行

```bash
# 运行程序
./bin/restaurant_system
```

## 使用说明

### 主菜单

程序启动后会显示主菜单，包含三个主要模块：

1. **菜单管理系统**：管理餐厅菜品
2. **外卖订单管理系统**：管理外卖订单
3. **堂食订单管理系统**：管理堂食订单

### 菜单管理

- **添加菜品**：输入菜品编号、名称、类别、口味和价格
- **删除菜品**：按编号删除菜品
- **修改菜品**：修改指定菜品的信息
- **查询菜品**：支持按编号或名称查询
- **显示所有菜品**：展示所有可用菜品

### 外卖订单管理

- **新建订单**：输入顾客信息、配送地址、选择菜品
- **删除订单**：按订单号删除订单
- **修改订单**：修改订单信息或菜品
- **查询订单**：按订单号、顾客姓名或电话查询
- **显示所有订单**：展示所有外卖订单

**注意**：外卖订单会自动计算10%的配送费

### 堂食订单管理

- **新建订单**：输入顾客信息、桌号、人数、预约时间和菜品
- **删除订单**：按订单号删除订单
- **修改订单**：修改订单信息或菜品
- **查询订单**：按订单号、顾客姓名或电话查询
- **显示所有订单**：展示所有堂食订单

## 技术实现

### C语言转换要点

本项目从C++完全转换为C语言，主要转换包括：

- **类 → 结构体**：所有C++类改为C结构体
- **成员函数 → 独立函数**：使用结构体指针作为第一个参数
- **构造/析构函数 → 初始化/销毁函数**：显式调用init和destroy函数
- **继承 → 组合**：使用结构体组合实现类继承
- **string → char数组**：使用固定大小的字符数组
- **new/delete → malloc/free**：使用标准C内存管理
- **cout/cin → printf/scanf**：使用标准C I/O
- **引用 → 指针**：所有引用改为指针传递

### 模块说明

#### 1. Dish (菜品模块)
- 管理菜品信息（编号、名称、类别、口味、价格）
- 提供菜品的输入、显示和属性访问

#### 2. Menu (菜单模块)
- 存储和管理菜品集合
- 支持菜品的增删改查操作
- 提供示例数据初始化

#### 3. Bill (账单模块)
- 管理账单项（菜品+数量）
- 计算小计、配送费和总计
- 支持账单项的增删改

#### 4. Order (订单基础模块)
- 存储订单基本信息（订单号、顾客姓名、电话）
- 为外卖和堂食订单提供公共字段

#### 5. Takeout (外卖订单)
- 包含Order基础信息
- 添加配送地址、备注和账单
- 自动计算配送费

#### 6. Dinein (堂食订单)
- 包含Order基础信息
- 添加桌号、人数、预约时间和账单
- 无配送费

#### 7. TakeoutSystem & DineinSystem (管理系统)
- 管理订单数组
- 提供完整的CRUD操作
- 支持多种查询方式

## 编码规范

- 遵循C99标准
- 函数命名：小写+下划线（snake_case）
- 宏定义：大写+下划线
- 结构体：大写开头（PascalCase）
- 使用strncpy/snprintf避免缓冲区溢出
- 使用fgets替代gets
- 所有malloc必须检查NULL
- 确保malloc/free成对使用

## 示例数据

系统启动时会自动加载以下示例菜品：

- 宫保鸡丁 (101) - ￥38.00
- 鱼香肉丝 (102) - ￥32.00
- 糖醋里脊 (103) - ￥42.00
- 凉拌黄瓜 (201) - ￥12.00
- 皮蛋豆腐 (202) - ￥18.00
- 北京烤鸭 (301) - ￥128.00
- 水煮鱼 (302) - ￥88.00
- 米饭 (401) - ￥3.00
- 馒头 (402) - ￥2.00
- 可乐 (501) - ￥8.00
- 雪碧 (502) - ￥8.00

## VS Code开发

项目包含VS Code配置文件，支持：

- **编译任务**：按F5或使用任务菜单编译
- **调试**：使用GDB调试器进行断点调试
- **运行**：一键编译并运行

## 许可证

本项目仅用于课程设计和学习目的。

## 作者

ShouXier

## 更新日志

### v2.0.0 (2024)
- 完全重写为C语言版本
- 移除所有C++特性
- 添加标准Makefile支持
- 添加VS Code配置
- 完善文档和注释